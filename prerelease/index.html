<!DOCTYPE html><html><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-70441517-2"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-70441517-2")</script><meta name="viewport" content="width=624"><meta name="description" content="Free and Open Source software for managing math homework. Students digitally record step-by-step math work. Teachers simultaneously review all assignments with complete solutions grouped by similar final answer. Grade faster and more thoroughly every day!"><title>Free Math - Homework software that is easy to use and powerful</title><link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet"><link rel="stylesheet" href="support/home.css"><script src="expect.min.js"></script><script src="lib/jquery.js"></script><script src="lib/underscore.js"></script><script src="lib/mathjax/2.1/MathJax.js?config=KAthJax-730d56e87e9c926b91584f6030314815&amp;delayStartupUntil=configured"></script><script src="lib/kas.js"></script><script src="lib/i18n.js"></script><script src="lib/mathjax/2.1/MathJax.js"/><script type="text/javascript" src="katexA11.js"></script><script type="text/javascript" src="kas.min.js"></script><link rel="stylesheet" href="katex.min.css"><script src="katex.min.js"></script><link rel="stylesheet" href="build/mathquill.css"><script type="text/javascript" src="build/mathquill.js"></script><script type="text/javascript">/**
       *  On load, called to load the auth2 library and API client library.
       */
      function handleClientLoad() {
        gapi.load('client:auth2', initClient);
        gapi.load('picker');
        gapi.load('drive');
      }

      // Client ID and API key from the Developer Console
      var CLIENT_ID = '412119895810-tji5c4tj6so2jmde8k3t1l3kaui5g4ca.apps.googleusercontent.com';
      // Authorization scopes required by the API; multiple scopes can be
      // included, separated by spaces.
      var SCOPES = 'https://www.googleapis.com/auth/drive.file ' +
                   'https://www.googleapis.com/auth/drive ' +
                   'https://www.googleapis.com/auth/classroom.courses.readonly ' +
                   'https://www.googleapis.com/auth/classroom.coursework.me ' +
                   'https://www.googleapis.com/auth/classroom.coursework.me.readonly ' +
                   'https://www.googleapis.com/auth/classroom.coursework.students.readonly ' +
                   'https://www.googleapis.com/auth/classroom.coursework.students';

      var APP_ID = 'quickstart-1561689319732';

      /**
       *  Initializes the API client library and sets up sign-in state
       *  listeners.
       */
      function initClient() {

        // Array of API discovery doc URLs for APIs used by the quickstart
        var DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"];

        gapi.client.init({
          clientId: CLIENT_ID,
          discoveryDocs: DISCOVERY_DOCS,
          scope: SCOPES
        }).then(function () {
          // Listen for sign-in state changes.
          console.log("stuff");
          gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

          // Handle the initial sign-in state.
          updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
        }, function(error) {
          //appendPre(JSON.stringify(error, null, 2));
        });
      }

      /**
       *  Called when the signed in status changes, to update the UI
       *  appropriately. After a sign-in, the API is called.
       */
      function updateSigninStatus(isSignedIn) {
        if (isSignedIn) {
            console.log("signed in");
        } else {
            console.log("not signed in");
        }
      }

      /**
       *  Sign in the user upon button click.
       */
      function handleAuthClick(event) {
        gapi.auth2.getAuthInstance().signIn();
      }

      /**
       *  Sign out the user upon button click.
       */
      function handleSignoutClick(event) {
        gapi.auth2.getAuthInstance().signOut();
      }

      /**
       * Append a pre element to the body containing the given message
       * as its text node. Used to display the results of the API call.
       *
       * @param {string} message Text to be placed in pre element.
       */
      function appendPre(message) {
        var pre = document.getElementById('content');
        var textContent = document.createTextNode(message + '\n');
        //pre.appendChild(textContent);
      }

    function listGoogeClassroomCourses(callback, errorcallback = function(){}) {
        if (! gapi.auth2.getAuthInstance().isSignedIn.get()) {
            alert('Need to authorize access to Google Services.');
            handleAuthClick();
        }

        var accessToken = gapi.auth.getToken().access_token;
        xhr = new XMLHttpRequest();
        xhr.open('get', 'https://classroom.googleapis.com/v1/courses');
        xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
        xhr.onload = function() {
            console.log(xhr);
            if (xhr.status == 200) {
                try {
                    var response = JSON.parse(xhr.responseText);
                    callback(response);
                } catch (e) {
                    console.log(e);
                    alert("Error reading google's response:" + xhr.responseText);
                }
            } else {
                alert(xhr.responseText);
            }
        };
        xhr.send();
    }

    function listGoogeClassroomAssignments(courseId, callback, errorcallback = function(){}) {
        if (! gapi.auth2.getAuthInstance().isSignedIn.get()) {
            alert('Need to authorize access to Google Services.');
            handleAuthClick();
        }

        var accessToken = gapi.auth.getToken().access_token;
        xhr = new XMLHttpRequest();
        xhr.open('get', 'https://classroom.googleapis.com/v1/courses/' + courseId + '/courseWork');
        xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
        xhr.onload = function() {
            console.log(xhr);
            if (xhr.status == 200) {
                try {
                    var response = JSON.parse(xhr.responseText);
                    callback(response);
                } catch (e) {
                    console.log(e);
                    alert("Error reading google's response:" + xhr.responseText);
                }
            } else {
                alert(xhr.responseText);
            }
        };
        xhr.send();
    }

    function listGoogeClassroomSubmissions(courseId, courseWorkId, callback, errorcallback = function(){}) {
        if (! gapi.auth2.getAuthInstance().isSignedIn.get()) {
            alert('Need to authorize access to Google Services.');
            handleAuthClick();
        }

        var accessToken = gapi.auth.getToken().access_token;
        xhr = new XMLHttpRequest();
        xhr.open('get', 'https://classroom.googleapis.com/v1/courses/' + courseId + '/courseWork/' +
                    courseWorkId + '/studentSubmissions');
        xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
        xhr.onload = function() {
            console.log(xhr);
            if (xhr.status == 200) {
                try {
                    var response = JSON.parse(xhr.responseText);
                    callback(response);
                } catch (e) {
                    console.log(e);
                    alert("Error reading google's response:" + xhr.responseText);
                }
            } else {
                alert(xhr.responseText);
            }
        };
        xhr.send();
    }

    function modifyGoogeClassroomSubmission(
        courseId, courseWorkId, submissionId, driveFileId, callback, errorcallback = function(){}) {

        if (! gapi.auth2.getAuthInstance().isSignedIn.get()) {
            alert('Need to authorize access to Google Services.');
            handleAuthClick();
        }

        var accessToken = gapi.auth.getToken().access_token;
        xhr = new XMLHttpRequest();
        xhr.open('post', 'https://classroom.googleapis.com/v1/courses/' + courseId + '/courseWork/' +
                    courseWorkId + '/studentSubmissions/' + submissionId + ':modifyAttachments');
        xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
        xhr.onload = function() {
            console.log(xhr);
            if (xhr.status == 200) {
                try {
                    var response = JSON.parse(xhr.responseText);
                    callback(response);
                } catch (e) {
                    console.log(e);
                    alert("Error reading google's response:" + xhr.responseText);
                }
            } else {
                alert(xhr.responseText);
            }
        };
        var payload = {
          "addAttachments": [
            {
                "driveFile": {
                    "id" : driveFileId
                }
            }
          ]
        };
        console.log(payload);
        xhr.send(JSON.stringify(payload));
    }

    function createGoogeClassroomAssignment(
        courseId, title, description, callback, errorcallback = function(){}) {

        if (! gapi.auth2.getAuthInstance().isSignedIn.get()) {
            alert('Need to authorize access to Google Services.');
            handleAuthClick();
        }

        var accessToken = gapi.auth.getToken().access_token;
        xhr = new XMLHttpRequest();
        xhr.open('post', 'https://classroom.googleapis.com/v1/courses/' + courseId + '/courseWork');
        xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
        xhr.onload = function() {
            console.log(xhr);
            if (xhr.status == 200) {
                try {
                    var response = JSON.parse(xhr.responseText);
                    callback(response);
                } catch (e) {
                    console.log(e);
                    alert("Error reading google's response:" + xhr.responseText);
                }
            } else {
                alert(xhr.responseText);
            }
        };
        // TODO - add due date
        var payload = {
            title: title,
            description: description,
            workType : "ASSIGNMENT",
            state : "PUBLISHED"
        };
        console.log(payload);
        xhr.send(JSON.stringify(payload));
    }

    // callback takes 2 parameters filename and content
      function openDriveFile(isBinary, callback){
        if (! gapi.auth2.getAuthInstance().isSignedIn.get()) {
            alert('Need to authorize access to Google Services.');
            handleAuthClick();
        }
        var accessToken = gapi.auth.getToken().access_token;
          var picker = new google.picker.PickerBuilder()
              .addView(new google.picker.DocsView())
              .addView(new google.picker.DocsUploadView())
              .setOAuthToken(accessToken)
              .setCallback(function(data) {
                  var url = 'nothing';
                  if (data[google.picker.Response.ACTION] == google.picker.Action.PICKED) {
                    var doc = data[google.picker.Response.DOCUMENTS][0];
                    //url = doc[google.picker.Document.URL];
                    console.log(doc);
                    downloadFile(doc.id, isBinary, function(data) {
                        callback(doc.name, data, doc.id);
                    });
                  }
              })
              .build();
          picker.setVisible(true);
      }

    function downloadFile(fileId, isBinary, callback) {
        gapi.client.request({
            'path': '/drive/v2/files/'+fileId,
            'method': 'GET',
            callback: function (file, responsetxt){
                  if (file.downloadUrl) {
                    var accessToken = gapi.auth.getToken().access_token;
                    var xhr = new XMLHttpRequest();
                    xhr.open('GET', file.downloadUrl);
                    // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Sending_and_Receiving_Binary_Data
                    if (isBinary) {
                        xhr.overrideMimeType('text\/plain; charset=x-user-defined');
                    } else {
                        xhr.overrideMimeType('text\/plain; charset=utf8');
                    }
                    xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
                    xhr.onload = function() {
                      console.log(xhr);
                      console.log(xhr.response);
                      if (xhr.status == 200) {
                        callback(xhr.response, fileId);
                      } else {
                        alert("Something went wrong: " + xhr.status);
                      }
                    };
                    xhr.onerror = function() {
                      console.log(xhr);
                      alert("Something went wrong: " + xhr.status);
                    };
                    xhr.send();
                  } else {
                      console.log(file);
                      alert("Error opening file from Drive. Note Free Math only opens files it creates itself.");
                  }
            }
        });
      }

      var updateFileWithBinaryContent = function(name, content, googleId,
          fileType='application/zip', callback, errorCallback = function(){}) {

        if (! gapi.auth2.getAuthInstance().isSignedIn.get()) {
            errorCallback();
            alert('Need to re-authorize access to Google Services.');
            handleAuthClick();
            return;
        }
        var meta = {title: name, mimeType: fileType};
        var accessToken = gapi.auth.getToken().access_token;
        var payload = new FormData();
        payload.append('metadata', new Blob([JSON.stringify(meta)], {type: 'application/json'}));
        payload.append('file', content);
        xhr = new XMLHttpRequest();
        xhr.open('put', 'https://www.googleapis.com/upload/drive/v2/files/' + googleId + '?uploadType=multipart');
        xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
        xhr.onload = function() {
          console.log(this);
            if (this.readyState === 4) {
                if (this.status == 200) {
                    callback();
                } else {
                    errorCallback();
                    console.log(this.status + " " + this.responseText);
                    alert(this.status + " " + this.responseText);
                }
            } else {
                // ignore other events for request still in progress
            }
        };
        xhr.send(payload);
      }

      var createFileWithBinaryContent = function(name, content, fileType='application/zip', callback) {

        //var content = new Blob([file]);
        var meta = {name: name, mimeType: fileType};
        var accessToken = gapi.auth.getToken().access_token;
        var payload = new FormData();
        payload.append('metadata', new Blob([JSON.stringify(meta)], {type: 'application/json'}));
        payload.append('file', content);
        xhr = new XMLHttpRequest();
        xhr.open('post', 'https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart');
        xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
        xhr.onload = function() {
            console.log(xhr);
            if (xhr.status == 200) {
                try {
                    var response = JSON.parse(xhr.responseText);
                    callback(response.id);
                } catch (e) {
                    console.log(e);
                    alert("Error reading google's response:" + xhr.responseText);
                }
            } else {
                alert(xhr.responseText);
            }
        };
        xhr.send(payload);
      }</script><script async defer="defer" src="https://apis.google.com/js/api.js" onload="this.onload=function(){},handleClientLoad()" onreadystatechange='"complete"===this.readyState&&this.onload()'></script><link href="static/css/main.5e339757.css" rel="stylesheet"></head><body style="margin-top:40px"><div id="root"></div><script type="text/javascript" src="static/js/main.260e7e7e.js"></script></body></html>
